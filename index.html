<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        textarea{
            width: 300px;
            height: 100px;
            resize: none;
        }
    </style>
    <script src="build/cyclon.bundle.debug.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
</head>
<body>
<div>
    <span id="address"></span>
</div>
<button id="active">active</button>
<button id="active2">active->accept</button>
<button id="passive">passive</button>
<br/>
<textarea id="txt" placeholder="data"></textarea>

</body>
<script>
$(function () {


    var cyclon = new Cyclon.Class();
    cyclon.ready(function () {
        console.log("OPEN");
        setTimeout(function () {
            var peers = cyclon.getPeers();
            var i = 0, L = peers.length;
            for(;i<L;i++) {
                peers[i].send("Hi");
            }
        },2000);
    });

    $("#address").html(cyclon.address);

    $("#active").on('click', function () {
        cyclon.launch(function onOffer (offer) {
            $("#txt").val(offer);
        });
    });

    $("#passive").on('click', function () {
        var offer = $("#txt").val();
        $("#txt").val("");
        cyclon.answer( offer,
        function onAnswer (answer) {
            $("#txt").val(answer);
        });
    });

    $("#active2").on('click', function () {
        var answer = $("#txt").val();
        cyclon.handshake(answer);
    });

});
</script>
</html>